const ordenCntrl = {};
//const _ = require('underscore');

const Orden = require('../models/orden');

ordenCntrl.renderNewOrden = (req, res) => {
    res.render('orden/newOrden')
};

ordenCntrl.createNewOrdenForm = (req, res) => {

    //console.log(req.body);
    const {

        //Destino
        latitudDestino,
        longitudDestino,
        Colonia,
        CalleDestino,
        codigoPostalDestino,
        NumeroInterioDestino,
        NumeroExteriorDestino,
        LocalidadDestino,
        //Origen
        CalleOrigen,
        codigoPostalOrigen,
        NumeroInterioOrigen,
        NumeroExteriorOrigen,
        LocalidadOrigen,
        latitudOrigen,
        longitudOrigen,
        //general data
        Pesos,
        Estatus,
        //autogenerated data
        //Id,
        tamaño,
        numeroProductos,
    } = req.body;

    if (
        latitudDestino && latitudOrigen &&
        longitudDestino && longitudOrigen &&
        Colonia && CalleDestino && codigoPostalDestino &&
        NumeroInterioOrigen && NumeroInterioDestino &&
        NumeroExteriorDestino && LocalidadDestino &&
        CalleOrigen && codigoPostalOrigen &&
        NumeroExteriorOrigen && LocalidadOrigen &&
        Pesos && Estatus && tamaño &&
        numeroProductos
    ) {
        //const id = games.length + 1;
        //const newOrder = { ...req.body };
        //_.push(newGame);
        //res.json(games);
        const newOrden = new Orden({
            latitudDestino, latitudOrigen,
            longitudDestino, longitudOrigen,
            Colonia, CalleDestino, codigoPostalDestino,
            NumeroInterioOrigen, NumeroInterioDestino,
            NumeroExteriorDestino, LocalidadDestino,
            CalleOrigen, codigoPostalOrigen,
            NumeroExteriorOrigen, LocalidadOrigen,
            tamaño, numeroProductos
        })
        console.log(newOrden)
        res.send('new Orden')
    } else {
        res.send('Wrong Request');
    }
    res.send('recived');

}

ordenCntrl.consultOrden = (req, res) => {
    res.send('this are your orders')
}

ordenCntrl.editOrdenForm = (req, res) => {
    res.send('edit form');
}

ordenCntrl.editOrden = (req, res) => {
    res.send('update your note');
}

ordenCntrl.cancelOrden = (req, res) => {
    const { id } = req.params;
    _.each(games, (game, i) => {
        if (game.id == id) {
            games.splice(i, 1);
        }
    })
    //res.send(games);
    res.send('deleting note');
}
module.exports = ordenCntrl;